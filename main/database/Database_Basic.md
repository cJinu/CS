# 데이터베이스의 기본

## 데이터베이스란
    일정한 규칙 혹은 규약을 통해 구조화되어 저장되는 데이터의 모음

## 데이터베이스의 특징
- 실시간 접근성
  - 사용자의 질의에 대하여 실시간으로 처리 및 응답
- 계속적인 진화
  - 삽입, 삭제, 갱신을 통하여 항상 최근의 정확한 데이터 동적으로 유지
- 동시 공유
  - 여러 사용자가 동시에 원하는 데이터를 공유
- 내용에 의한 참조
  - 데이터베이스 내부의 데이터를 참조할 때에 데이터의 주소나 위치가 아닌 사용자가 요구하는 내용에 따라 참조
- 논리적 독립성
  - 응용프로그램과 데이터베이스를 독립시킴으로써 데이터의 논리적 구조 변경이 응용프로그램에 영향을 끼치지 않는다.


## DBMS (DataBaseManagementSystem)
    다수의 사용자들이 데이터베이스 내의 데이터에 접근할 수 있도록 해주는 소프트웨어, 대표적으로 Oracle, MySQL, MSSQL, MariaDB 등이 있다.


## 엔터티
    데이터 모델링에 사용되는 객체
    업무상 관리가 필요한 것 (회원, 결제정보 등)
    저장되기 위한 어떤 것(Thing)에 해당
- 약한 엔터티와 강한 엔터티
  - 하나의 엔터티가 다른 엔터티의 존재 여부에 따라 종족적으로 존재한다면 약한 엔터티
  - 종족적이지 않다면 강한 엔터티
  - 건물과 방의 관계에서 방은 약한 엔터티, 건물은 강한 엔터티

## 릴레이션
    데이터베이스에서 정보를 구분하여 저장하는 기본 단위
- == 테이블
- 엔터티를 데이터베이스 내부에서 릴레이션으로 구현

## 속성
    릴레이션에서 관리하는 구체적이며 고유한 이름을 갖는 정보
- == 필드(Field)
- 데이터베이스에서 열(column)에 해당
- '차'라는 엔터티의 경우 번호, 바퀴 수, 차종 등

## 도메인
    각각의 속성들이 가질 수 있는 값의 집합
- 타입, 길이 등으로 결정됨.

## 필드 타입
    필드의 도메인을 정하기 위한 타입, 문자열과 숫자 등을 구분
- 정수 타입
    | 타입 | 용량(바이트) | 최솟값(부호O) | 최솟값(부호X) | 최댓값(부호O) | 최댓값(부호X) |
    | --- | --- | --- | --- | --- | --- |
    | TINYINT | 1 | -128 | 0 | 127 | 255 |
    | SMALLINT | 2 | -32,768 | 0 | 32,767 | 65,535 |
    | MEDIUMINT | 3 | -8,388,608 | 0 | 8,388,607 | 16,777,215 |
    | INT | 4 | -2,147,483,648 | 0 | 2,147,483,647 | 4,294,967,295 |
    | BIGINT | 8 | -9,223,372,036,854,775,808 | 0 | 9,223,372,036,854,775,807 | 18,446,744,073,709,551,615 |
- 소수 타입
    | 타입 | 용량(바이트) | 범위 |
    | --- | --- | --- |
    | FLOAT | 4 | -3.40E+38 ~ -1.17E-38 | 
    | DOUBLE | 8 | 1.22E-308 ~ 1.79E+308 | 
    | DECIMAL | 5~17 | -10^38+1 ~ 10^38-1 | 

- 날짜 타입
  | 타입 | 사용되는 경우 | 범위 | 용량 |
  | --- | --- | --- | --- |
  | DATE | 날짜 O 시간 X | 1000-01-01 ~ 9999-12-31 | 3Byte |
  | DATETIME | 날짜 O 시간 O | 1000-01-01 00:00:00 ~ 9999-12-31 23:59:59 | 8Byte |
  | TIMESTAMP | 날짜 O 시간 O | 1970-01-01 00:00:01 ~ 2038-01-19 03:14:07 | 4Byte |

- 문자 타입
  - CHAR / VARCHAR -> 문자열을 저장할 때 사용
    | 타입 | 길이 고정 여부 | 범위 |
    | --- | --- | --- |
    | CHAR | O | 0~255 | 
    | VARCHAR | X | 0~65,535 |
  - TEXT / BLOB -> 큰 데이터를 저장할 때 사용
    | 타입 | 쓰임 |
    | --- | --- |
    | TEXT | 게시판의 본문과 같은 큰 문자열 |
    | BLOB | 이미지, 동영상 등 (하지만 보통은 서버에 파일을 올리고 경로를 통해 이미지나 동영상을 사용) |
  - ENUM / SET -> 문자열 열거형 타입
    - ENUM 
      - 단일 선택만 가능
      - 최대 65,335 개의 요소 삽입 가능
    - SET 
      - 여러 데이터 선택 가능
      - 비트 단위의 연산 가능
      - 최대 64개의 요소 삽입 가능

## 관계
    여러 테이블간의 관계 
    관계 화살표로 나타낸다.
- 관계 화살표
  ![관계화살표](https://blog.kakaocdn.net/dn/kCnHv/btqLW8LRGpN/IDARbgYYD5WmA7wfo7m2y1/img.gif)
- 1:1 관계
![1:1](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FctM422%2FbtrOlLAF46v%2FWJwxSyjkBDddzEZc8dssM0%2Fimg.png)
  - 하나의 유저가 하나의 전화번호를 가지고 있는 경우
- 1:N 관계
  ![1:N](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FxvL99%2FbtrOmVJazqn%2FRupKdmpzO6BQRCus6vp4Y1%2Fimg.png)
  - 하나의 유저가 여러 개의 전화번호를 가질 수는 있으나 여러 명의 유저가 하나의 전화번호를 가질 수는 없는 구조
  - 일반적으로 가장 많이 사용되는 관계
- N:M 관계
  ![N:M](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FdO2vlA%2FbtrOlIREErx%2F9DHIbINoyBe6xnDnZ93570%2Fimg.png)
  - 하나의 고객이 여러 개의 여행 패키지를 구매할 수 있는 경우
  - 직접적으로 연결하는 것이 아닌 1:N, 1:M 관계를 갖는 테이블 두 개로 나눠서 설정

## 키
    릴레이션의 튜플을 식별할 수 있는 단일 속성 혹은 속성들의 집합
- 테이블 내 튜플 식별
- 테이블간의 관계를 더욱 명확하게 한다.
    ### 키의 관계
    ![키의 관계](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2F24XGL%2Fbtrq4vNY1Jl%2FZ54XGiRbdtjXT0Da7TwOo0%2Fimg.png)

    ### 유일성과 최소성
    - 유일성
      - 하나의 키값으로 튜플을 유일하게 식별할 수 있는 성질
    - 최소성
      - 키를 구성하는 속성들 중 최소한의 성질로만 키를 구성하는 성질


    ### 슈퍼키(Super Key)
        각 튜플을 유일하게 식별할 수 있는 속성들의 집합
    - **유일성**만 만족

    ### 후보키(Candidate Key)
        기본키가 될 수 있는 `후보`키
    - **유일성**과 **최소성**을 만족
    - 하나의 테이블에 여러 개가 존재할 수 있다.

    ### 기본키(Primary Key)
        테이블의 데이터 중 고유하게 존재하는 속성
    - 여러 후보키 중 선택된 키
    - NULL을 가질 수 있는 속성이 포함된 후보키는 기본키로 부적절
    - 값이 자주 변경될 수 있는 속성이 포함된 후보키는 기본키로 부적절
    - 최대한 단순한 후보키를 기본키로 선택
    > 자연 키와 인조 키 
    > - 자연 키
    >   - 기본키만을 위한 데이터가 아니라 비즈니스 모델에서 자연스레 나오는 속성
    >   - 주민번호 등
    > - 인조 키
    >   - 기본키를 위해 인위적으로 생성한 속성
    >   - sequence, auto increment 등
    > - **자연키는 변하는 경우가 존재하지만 인조 키는 대부분의 경우 변하지 않기 때문에 보통은 인조 키를 기본키로 설정.**

    ### 외래 키(Foreign Key)
        두 개 이상의 테이블의 관계를 식별하기 위한 속성
    - 다른 테이블의 기본키를 참조
    - 중복 가능

    ### 대체 키(Alternate Key)
        기본키로 지정하고 남은 후보 키
