# 2.1 네트워크의 기초

네트워크: `노드`와 `링크`가 서로 연결되어 있으며 리소스를 공유하는 집합

`노드`: 서버, 라우터, 스위치와 같은 네트워크 장치

`링크`: 유선 또는 무선

## 2.1.1 처리량과 지연시간

네트워크를 구축할 때에는 **‘좋은’** 네트워크로 만드는 것이 중요

- 좋은 네트워크란?
    - 많은 처리량
    - 짧은 지연시간
    - 적은 장애 빈도
    - 좋은 보안
  
![image](https://github.com/cuzzzu1318/Algorithm/assets/77597885/e9d6e6c7-d3ff-4d0f-85f5-8e094da8991e)


`처리량(throughput)`

- 링크 내에서 성공적으로 전달된 데이터의 양.
- 얼만큼의 트래픽을 처리했느냐
- bps 단위 사용(초당 처리되는 비트 수)

`트래픽`

- 특정 시점에 링크 내에 흐르는 데이터의 양
- 처리량과 트래픽은 다르다!

`대역폭(bandwidth)`

- 주어진 시간동안 네트워크 연결을 통해 흐를 수 있는 최대 비트
- 대역폭이 크면 무조건 좋은 네트워크인가??
    - No.
    - 더 많은 데이터가 빠르게 전송되기 때문에 보안에 더욱 취약
    - 실제로 사용되지 않는 영역이 낭비될 가능성이 높아질 수 있다.

`지연 시간`

- 요청이 처리되는 데에 걸린 시간
- 메시지가 두 장치 사이를 왕복하는 데 걸린 시간
- 매체 타입, 패킷 크기, 라우터의 패킷 처리 시간에 영향을 받는다.

## 2.1.2 네트워크 토폴로지와 병목 현상

### **네트워크 토폴로지**

노드와 링크가 어떻게 배치되어 있는지에 대한 방식이자 연결 형태

- `트리 토폴로지`
    
    ![image](https://github.com/cuzzzu1318/Algorithm/assets/77597885/e16b5516-7d33-4f69-8936-a25621494023)
    
    - 계층형 토폴로지
    - 트리 형태로 배치
    
    | 장점 | 단점 |
    | --- | --- |
    | 노드의 추가 삭제 쉬움 | 특정 노드에 트래픽 집중 시 하위 노드에 영향 끼침 |
- `버스 토폴로지`
    
   ![image](https://github.com/cuzzzu1318/Algorithm/assets/77597885/fcdba35c-9ac5-44fb-93b8-63b769fea4a4)
    
    - **중앙 통신 회선 하나에 여러개의 노드**가 연결
    - 근거리 통신망(LAN)에서 사용
    - 설치 비용이 적고 신뢰성이 우수
    - 노드 추가, 삭제 용이
    - 스푸핑이 가능

| 장점 | 단점 |
| --- | --- |
| 설치 비용이 적고 신뢰성 우수 | 스푸핑이 가능 |
| 노드 추가, 삭제 용이 |  |

<aside>
💡 **스푸핑**
올바르게 수신부에 가야 할 패킷이 악의적인 노드에 전달되도록 하는 공격 기법

</aside>

- `스타 토폴로지`
    
    ![image](https://github.com/cuzzzu1318/Algorithm/assets/77597885/cca31741-b1dd-47cc-859f-a3bec0417f2c)              
    
    - 중앙에 있는 노드에 모두 연결된 네트워크 구성
    
    | 장점 | 단점 |
    | --- | --- |
    | 노드 추가, 삭제 용이 | 중앙노드에 장애가 발생하면 전체를 사용할 수 없음. |
    | 패킷 충돌 가능성 적음 | 설치 비용이 고가 |
    | 에러 탐지 용이 |  |
    | 장애 노드가 중앙 노드가 아닌 다른 노드에는 영향 x |  |
- `링형 토폴로지`
    
    ![image](https://github.com/cuzzzu1318/Algorithm/assets/77597885/94274c01-b388-4a3a-b971-1648d3fae234)
    
    - 각각의 노드가 양 옆의 두 노드와 연결한 구성 방식
    
    | 장점 | 단점 |
    | --- | --- |
    | 노드 수가 증가되어도 네트워크상의 손실이 거의 없다. | 네트워크 구성 변경이 어렵다. |
    | 충돌 가능성 적다 | 회선에 장애가 발생하면 전체 네트워크에 영향을 끼친다. |
    | 노드의 고장을 쉽게 찾을 수 있다. |  |
- `메시 토폴로지`
    
    ![image](https://github.com/cuzzzu1318/Algorithm/assets/77597885/b4cc5af9-e856-43b5-91e7-cdbdd227c644)
    
    - 그물망처럼 연결된 구조
    
    | 장점 | 단점 |
    | --- | --- |
    | 한 단말에 문제가 발생하여도 다른 경로가 많아서 계속 사용 가능 | 노드의 추가가 어려움 |
    | 트래픽 분산 처리 가능 | 구축과 운영이 고가의 비용 요구 |
    

### **병목 현상**

![image](https://github.com/cuzzzu1318/Algorithm/assets/77597885/11b1ed45-8508-4aa1-94e6-302ab61119ef)

병의 몸통보다 목부분이 좁아서 물이 상대적으로 천천히 쏟아지는 것에 비유한 현상

트래픽이 몰려서 제대로 관리되지 못하는 경우 웹 사이트로 들어갈 수 없다.

이러한 병목현상을 찾을 때 중요한 기준이 될 수 있기 때문에 토폴로지가 중요!

- 병목현상이 일어나고 있는 서비스가 존재한다면
- 해당 서비스의 토폴로지가 어떻게 되어있나 확인 한 후
- 해당 서비스에 알맞는 회선을 추가하여 병목현상을 해결할 수 있다.

## 2.1.3 네트워크 분류

네트워크는 규모를 기반으로 분류할 수 있다.

### **LAN(Local Area Network)**

사무실과 같은 개인적으로 소유 가능한 규모

- 전송 속도가 빠르고 혼잡하지 않다.

### MAN(Metropolitan Area Network)

서울시 등 시 정도의 규모

- 전송 속도 평균, LAN보다는 혼잡

### WAN(Wide Area Network)

세계 규모

- 전송 속도 낮음, MAN보다 혼잡

## 2.1.4 네트워크 성능 분석 명령어

작성한 코드에는 문제가 없는데 서비스에 문제가 발생하는 경우

→ 이는 네트워크 병목현상일 가능성이 있다.

- 네트워크 병목 현상의 주된 원인
    1. 네트워크 대역폭
        - 제한된 대역폭에 많은 트래픽이 몰리는 경우
    2. 네트워크 토폴로지
        - 버스 토폴로지: 한 통로에서 데이터의 충돌 발생
        - 스타 토폴로지: 모든 기기가 중앙 허브에 직접 연결되는 경우, 허브의 처리 능력이 한계에 달하는 경우
        - 링 토폴로지: 데이터의 흐름이 단방향이기 때문에 특정 세그먼트에서 데이터 전송이 많아지는 경우
        - 메시 토폴로지: 특정 라우팅 장비의 성능이 떨어지는 경우, 일부 경로의 대역폭이 한정되어 있는 경우
        - 트리 토폴로지: 상위 계층에 있는 라우터 혹은 스위치의 처리 능력이 낮은 경우
    3. 서버 CPU, 메모리 사용량
        - 트래픽이 몰리는 경우, 복잡한 작업을 수행하는 경우
    4. 비효율적인 네트워크 구성
        - 비효율적인 라우팅
        - 부적절한 대역폭 할당

이를 알아보기 위한 몇 가지 명령어가 존재한다.

### ping(Packet INternet Groper)

네트워크 상태를 확인하려는 대상 노드를 향해 일정 크기의 패킷을 전송하는 명령어

![image](https://github.com/cuzzzu1318/Algorithm/assets/77597885/6acd8eda-88e9-4cf6-9cdb-1b7164713292)
ICMP 프로토콜을 통해 동작 → ICMP프로토콜을 지원하지 않는 기기를 대상으로는 실행 불가능

또한 네트워크 정책 상 ICMP나 traceroute를 차단하는 대상의 경우 불가

<aside>
💡 **ICMP?**
Internet Control Message Protocol
인터넷 제어 메시지 프로토콜
오류 메시지를 전송 받는데에 주로 사용
**traceroute?**
명령어를 실행하는 컴퓨터에서 목적지까지 가는 네트워크 경로를 확인해 주는 명령어

</aside>

### netstat

접속되어 있는 서비스들의 네트워크 상태를 표시하는 데 사용

![image](https://github.com/cuzzzu1318/Algorithm/assets/77597885/897ac364-cd3b-4c0d-a691-1085e8478b96)

### nslookup

DNS에 관련된 내용을 확인하기 위한 명령어

특정 도메인에 매핑된 IP를 확인할 때 사용

![image](https://github.com/cuzzzu1318/Algorithm/assets/77597885/453a2d51-87f9-4fb5-96de-92695befad0a)

### tracert

traceroute

목적지 노드까지 네트워크 경로를 확인하기 위한 명령어

![image](https://github.com/cuzzzu1318/Algorithm/assets/77597885/01850c97-3da1-40e1-9a99-3848ddf4ddcd)

### 이 외의 명령어

- ftp - 대용량 파일 전송 및 관리
- tcpdump - CLI환경에서 동작하는 packet analyzer
    - Packet 을 이용한 트러블 슈팅에 자주 활용

※wireshark, netmon등의 프로그램을 통해 네트워크 분석 가능

## 2.1.5 네트워크 프로토콜 표준화

네트워크 프로토콜 → 다른 장치들끼리 데이터를 주고받기 위해 설정된 공통된 인터페이스

### 프로토콜이 필요한 이유?

Linux와 Windows간 통신이 필요한 경우 → 운영체제가 다르기 때문에 중간에 통신 규약을 정해주지 않는다면 제 멋대로 통신할 것이기 때문.

### 계층 별 프로토콜

- 애플리케이션 계층
    - `FTP`
        - 파일 전송 프로토콜
    - `SMTP`
        - 인터넷 연결을 통한 이메일 전송 프로토콜
    - `SNMP`
        - 네트워크 장비 관리 프로토콜
- 전송 계층
    - `TCP`
    - `UDP`
- 인터넷 계층
    - `IP`
        - 인터넷에 연결되어 있는 모든 장치들을 식별할 수 있도록 하는 주소 체계
    - `ARP`
        - 논리적 주소인 IP 주소를 실제 물리 주소인 MAC주소로 변환하는 “주소 해석 프로토콜” 반대로 MAC→IP의 역할을 수행하는 것은 RARP 프로토콜
    - `ICMP`
        - 데이터가 의도한 대상에 제 때 도착하는지 확인하기 위한 프로토콜
    - `IGMP`
        - 주로 IPTV에 많이 사용되는 프로토로 여러 호스트에게 채널이 효과적으로 전송되도록 하기 위한 프로토콜
- 네트워크 접근 계층(링크 계층)
    - `이더넷`
        - 주로 로컬 영역(LAN)에서 사용되며 데이터를 효과적으로 전송하기 위한 프로토콜
        - 802.3x를 기반으로 함.
    - `802.11x`
        - IEEE가 정의한 무선 로컬 영역 네트워크(WLAN) 표준 프로토콜 시리즈로, 무선 통신을 위한 통신 규
