# TCP 계층 구조
  - 네 개의 계층: 애플리케이션, 전송, 인터넷, 링크
  - ![image](https://github.com/cJinu/CS/assets/38110757/204c20d5-bb55-4f5b-848e-ff258e605cb0)
  - 특정 계층이 변경되었을 때 다른 계층이 영향을 받지 않도록 설계
  - 프로토콜
    - 장치 사이에서 메시지를 주고 받는 양식과 규칙의 체계
    - 통신 규약 및 약속
    - 장치 간 같은 프로토콜을 사용함을 통해 통신
  - 애플리케이션 계층
    - 응용 프로그램이 사용되는 프로토콜 계층
    - 웹 서비스, 이메일 등 서비스를 실질적으로 사람들에게 제공
    - FTP, SSH, HTTP, SMTP, DNS
    - FTP
      - 장치와 장치 간의 파일을 전송하는 데 사용되는 표준 통신 프로토콜
      - 파일 송수신만을 위한 프로토콜 → 파일 송수신 속도가 빠름
      - HTTP 프로토콜로도 파일 송수신이 가능하지만 대량의 파일을 빠르게 송수신할 때는 FTP가 효과적
    - SSH
      - 보안되지 않은 네트워크에서 네트워크 서비스를 안전하게 운영하기 위한 암호화 네트워크 프로토콜
      - 로컬 코드를 원격 저장소인 github에 push 할 때 활용
    - HTTP
      - World Wide Web을 위한 데이터 통신의 기초이자 웹 사이트를 이용하는 데 쓰는 프로토콜
      - HTML을 제공, 제어하는 프로토콜
      - https는 서버와 pc 간 송수신되는 데이터를 암호화 → 보안
    - SMTP
      - 전자 메일 전송을 위한 인터넷 표준 통신 프로토콜
      - 수신할 때는 POP 프로토콜!
    - DNS
      - 도메인 이름과 IP 주소를 매핑해주는 서버
      - 숫자(IP)보다 문자(도메인)이 더 익숙
      - 서버가 IP 주소를 변경해도 쉽게 대처 가능
      - 사용자가 www.naver.com을 요청하면 DNS 서버에서 해당 도메인의 IP 주소를 사용자에게 전달, 그 후 해당 IP 주소를 이용해 naver 웹사이트에 접속
      - ![image](https://github.com/cJinu/CS/assets/38110757/b9d1144d-4839-490b-b418-c0b8e544bc65)
      - Top-Level Domain: com(일반 기업체)이나 edu(교육 기관) 등 여러 종류가 있음
      - ![image](https://github.com/cJinu/CS/assets/38110757/4309a0f4-9d37-43ca-9989-681658f00181)
  - 전송 계층
    - 송신자와 수신자를 연결하는 통신 서비스 제공
    - 연결 지향 데이터 스트림 지원, 신뢰성, 흐름 제어 제공
    - 애플리케이션과 인터넷 계층 사이의 데이터가 전달될 때 중계 역할
    - TCP, UDP
    - TCP
      - 패킷 사이의 순서를 보장 ← 세그먼트에 순서 번호를 부여
      - ![image](https://github.com/cJinu/CS/assets/38110757/690efc43-4b88-46e3-a28a-ebcb17421736)
      - ![image](https://github.com/cJinu/CS/assets/38110757/6df623d9-7e0d-40f0-a5ae-b28b1b84c234)
      - ![image](https://github.com/cJinu/CS/assets/38110757/bf30e6a9-09e5-46b4-aea9-a8a9f3023946)
      - 연결지향 프로토콜을 사용해서 연결
      - 신뢰성을 구축해서 수신여부 확인 ← 3-way handshake
      - 3-웨이 핸드셰이크
        - ![image](https://github.com/cJinu/CS/assets/38110757/a4765da5-0c81-44ec-9aa1-e5e20f6f205d)
      - 연결을 해제할 때는 4-way handshake 사용
      - 4-웨이 핸드셰이크
        - ![image](https://github.com/cJinu/CS/assets/38110757/efe74daf-e95f-4564-aa48-d3f2bf850ea3)
        - TIME_WAIT을 하는 이유
          - 지연 패킷이 발생할 경우를 대비
      - ‘가상회선 패킷 교환 방식’을 사용
      - 가상회선 패킷 교환 방식
        - 각 패킷에는 가상회선 식별자가 포함
        - 모든 패킷을 전송하면 가상회선이 해제되고 패킷들은 전송된 순서대로 도착
    - UDP
      - 순서를 보장 하지 않음
      - 수신 여부를 확인하지 않음
      - 단순히 데이터만 주는 ‘데이터그램 패킷 교환 방식’ 사용
      - 데이터그램 패킷 교환 방식
        - 패킷이 독립적으로 이동하며 최적의 경로를 선택
        - 하나의 메시지에서 분할된 여러 패킷은 서로 다른 경로로 전송될 수 있음
  - 인터넷 계층
    - 장치로부터 받은 네트워크 패킷을 IP 주소로 지정된 목적지로 전송하기 위해 사용되는 계층
    - IP, ARP, ICMP
  - 링크 계층
    - 전선, 광섬유, 무선 등으로 실질적으로 데이터를 전달하며 장치 간의 신호를 주고받는 규칙을 정하는 계층
    - 물리 계층: 무선 LAN과 유선 LAN을 통해 0과 1로 이루어진 데이터를 보내는 계층
    - 데이터 링크 계층: ‘이더넷 프레임’을 통해 에러 확인, 흐름 제어, 접근 제어를 담당하는 계층
    - 유선 LAN과 전이중화 통신
      - 전이중화 통신: 양쪽 장치가 동시에 송수신할 수 있는 방식, 송신로와 수신로를 나눠서 데이터를 송수신
      - TP 케이블: 여덟개의 구리선을 두 개씩 꼬아서 묶은 케이블, UTP(실드 처리 X, 흔한 LAN 케이블)와 STP
      - 광섬유 케이블: 레이저를 이용해서 통신, TP 케이블보다 장거리 및 고속 통신이 가능, 광섬유 내부와 외부를 다른 밀도를 가지는 유리나 플라스틱 섬유로 제작해서 빛이 반사 and 전진하는 원리를 이용
    - 무선 LAN과 반이중화 통신
      - 송수신을 같은 채널을 사용 → 반이중화 통신
      - 반이중화 통신: 동시에 통신할 수 없으며 한 번에 한 방향만 통신
        - CSMA/CA: 데이터를 보내기 전에 사전에 가능한 한 충돌을 방지하는 방식
          1. 데이터를 송신하기 전 무선 매체를 살핌
          2. 캐리어 감지: 회선이 비어있는지 판단
          3. IFS: 랜덤 값을 기반으로 정해진 시간만큼 기다리며, 만약 무선 매체가 사용 중이라면 점차 그 간격을 늘려가며 기다림
          4. 이후 데이터 송신
      - 무선 LAN: 무선 신호 전달 방식을 이용하여 2대 이상의 장치를 연결하는 기술
        - 비유도 매체인 공기에 주파수를 쏴 무선 통신망을 구축
        - WIFI: 전자기기들이 무선 LAN 신호에 연결할 수 있게 하는 기술, 무선 접촉 장치 AP가 있어야 함
        - 공유기: 유선 LAN 신호를 무선 LAN 신호로 바꿔줌
        - BSS: 기본 서비스 집합, 단거리 통신 지원, 하나의 AP로 구성, AP와 장치들이 서로 통신가능한 구조, 해당 범위를 벗어나면 네트워크 사용 불가
        - ESS: 하나 이상 연결된 BSS 그룹, 장거리 통신 제공, 학교 와이파이 느낌, 하나의 DS에 여러 AP들이 연결
    - 이더넷 프레임
      - ![image](https://github.com/cJinu/CS/assets/38110757/69330172-399d-4579-b428-fc3872671f32)
      - MAC 주소: 물리적 고유 식별 주소, 각 장치의 LAN 카드를 식별하기 위한 주소, 링크 계층에서 IP 주소 → MAC 주소 변환이 발생
      - EtherType: IP 프로토콜의 타입(IPv4, IPv6)
# PDU
  - 어떠한 계층에서 계층으로 데이터가 전달될 때 한 덩어리의 단위
  - 헤더와 페이로드로 구성
  - 어플리케이션 계층: 메시지
  - 전송 계층: 세그먼트(TCP), 데이터그램(UDP)
  - 인터넷 계층: 패킷
  - 링크 계층: 프레임(데이터 링크 계층), 비트(물리 계층)
